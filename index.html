<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gold & Currency Converter</title>
<style>
  body {
    color: #f9f9f9;
    font-family: "Arial Rounded MT Bold", sans-serif;
    background: #282C35;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 { margin-bottom: 15px; }
  label { display:block; margin-top:10px; margin-bottom:5px; }
  input, select, button {
    width:220px; padding:8px; margin-bottom:10px;
    border-radius:8px; border:1px solid #ccc; text-align:center; font-size:16px;
  }
  button { cursor:pointer; background:#007BFF; color:white; border:none; }
  button:hover { background:#0056b3; }
  #result {
    margin-top:15px; color:#f9f9f9; font-size:28px; text-align:center; white-space:pre-line;
  }
  footer { margin-top:20px; font-size:12px; color:gray; }
  .note { margin-top:5px; font-size:12px; color:#007BFF; }
</style>
</head>
<body>

<h1>üí∞ Gold & Currency Converter</h1>

<label>USD value of 1M Gold:</label>
<input id="goldRate" placeholder="e.g. 35">

<label>EGP value of 1 USD:</label>
<input id="usdToEgp" placeholder="e.g. 55">

<label>USD value of 1000 Credits:</label>
<input id="creditRate" placeholder="e.g. 5">

<label>Conversion Mode:</label>
<select id="mode">
  <option>Gold ‚Üí USD/EGP/Credits</option>
  <option>USD ‚Üí Gold</option>
  <option>EGP ‚Üí Gold</option>
  <option>USD ‚Üí EGP</option>
  <option>EGP ‚Üí USD</option>
</select>

<label>Amount:</label>
<input id="amount" placeholder="e.g. 650000">

<button id="convertBtn">Convert</button>

<div id="result"></div>

<footer>Created by Ahmed Plally</footer>
<div class="note">Made to help Posters / Boosters ‚ù§Ô∏è</div>

<script>
  const goldRateInput = document.getElementById('goldRate');
  const usdToEgpInput = document.getElementById('usdToEgp');
  const creditRateInput = document.getElementById('creditRate');
  const amountInput = document.getElementById('amount');
  const modeSelect = document.getElementById('mode');
  const resultDiv = document.getElementById('result');
  const convertBtn = document.getElementById('convertBtn');

  // Replace Arabic-Indic digits with Western digits
  function convertArabicDigits(str = "") {
    const arabicDigits = ['Ÿ†','Ÿ°','Ÿ¢','Ÿ£','Ÿ§','Ÿ•','Ÿ¶','Ÿß','Ÿ®','Ÿ©'];
    return String(str).replace(/[Ÿ†-Ÿ©]/g, d => arabicDigits.indexOf(d));
  }

  function parseNumberSafe(raw) {
    const cleaned = convertArabicDigits(raw).replace(/,/g, '').trim();
    const n = parseFloat(cleaned);
    return Number.isFinite(n) ? n : NaN;
  }

  function fmt(n, digits=2) {
    if (!Number.isFinite(n)) return "0.00";
    return n.toFixed(digits);
  }

  function convert() {
    const goldRate = parseNumberSafe(goldRateInput.value);      // USD per 1,000,000 gold
    const usdToEgp = parseNumberSafe(usdToEgpInput.value);      // EGP per 1 USD
    const creditRate = parseNumberSafe(creditRateInput.value);  // USD per 1000 credits (e.g. 5)
    const amount = parseNumberSafe(amountInput.value);
    const mode = modeSelect.value;

    // Basic validation: goldRate, usdToEgp and amount needed for most conversions.
    if (!Number.isFinite(goldRate) || !Number.isFinite(usdToEgp) || !Number.isFinite(amount)) {
      resultDiv.textContent = "‚ö† Please enter valid numbers for Gold rate, EGP rate and Amount.";
      return;
    }

    // creditRate might be NaN or 0 ‚Äî handle gracefully (credits -> 0.00)
    const hasValidCreditRate = Number.isFinite(creditRate) && creditRate !== 0;

    let resultText = "";

    switch (mode) {
      case "Gold ‚Üí USD/EGP/Credits": {
        const usdValue = (amount / 1000000) * goldRate;
        const egpValue = usdValue * usdToEgp;
        // Correct formula: credits = (USD amount / USD per 1000credits) * 1000
        const credits = hasValidCreditRate ? (usdValue / creditRate) * 1000 : 0;
        resultText =
          `${amount.toLocaleString()} Gold\n` +
          `USD = ${fmt(usdValue)}\n` +
          `EGP = ${fmt(egpValue)}\n` +
          `Credits = ${fmt(credits)}`;
        break;
      }

      case "USD ‚Üí Gold": {
        const goldFromUsd = (amount / goldRate) * 1000000;
        const credits = hasValidCreditRate ? (amount / creditRate) * 1000 : 0;
        resultText =
          `${fmt(amount)} USD = ${goldFromUsd.toLocaleString()} Gold\n` +
          `Credits = ${fmt(credits)}`;
        break;
      }

      case "EGP ‚Üí Gold": {
        const usdFromEgp = amount / usdToEgp;
        const goldFromEgp = (usdFromEgp / goldRate) * 1000000;
        const credits = hasValidCreditRate ? (usdFromEgp / creditRate) * 1000 : 0;
        resultText =
          `${fmt(amount)} EGP = ${goldFromEgp.toLocaleString()} Gold\n` +
          `USD = ${fmt(usdFromEgp)}\n` +
          `Credits = ${fmt(credits)}`;
        break;
      }

      case "USD ‚Üí EGP": {
        const egpFromUsd = amount * usdToEgp;
        const credits = hasValidCreditRate ? (amount / creditRate) * 1000000 * 0.001 : 0; 
        // simpler: (amount / creditRate) * 1000  -> same as below
        // keep same pattern as others:
        const credits2 = hasValidCreditRate ? (amount / creditRate) * 1000 : 0;
        resultText =
          `${fmt(amount)} USD = ${fmt(egpFromUsd)} EGP\n` +
          `Credits = ${fmt(credits2)}`;
        break;
      }

      case "EGP ‚Üí USD": {
        const usdFromEgp2 = amount / usdToEgp;
        const credits = hasValidCreditRate ? (usdFromEgp2 / creditRate) * 1000 : 0;
        resultText =
          `${fmt(amount)} EGP = ${fmt(usdFromEgp2)} USD\n` +
          `Credits = ${fmt(credits)}`;
        break;
      }

      default:
        resultText = "Unknown mode";
    }

    resultDiv.textContent = resultText;
  }

  convertBtn.addEventListener('click', convert);
  amountInput.addEventListener('keypress', function(e) { if (e.key === 'Enter') convert(); });

  // -- Optional: pre-fill example data (you can remove these lines) --
  // goldRateInput.value = "35"; creditRateInput.value = "5"; usdToEgpInput.value = "55"; amountInput.value = "650000";
  // convert(); // uncomment these three lines if you want the example to auto-run on load
</script>

</body>
